---
title: c26816
keywords: c26816
author: Rastaban
ms.author: philc
ms.date: 01/27/2020
ms.topic: reference
f1_keywords:
- C26816
helpviewer_keywords:
- C26816
dev_langs:
- C++
ms.openlocfilehash: 9eeefd76191e05e9f6ec46a7b8c1af003724973c
ms.sourcegitcommit: c123cc76bb2b6c5cde6f4c425ece420ac733bf70
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/14/2020
ms.locfileid: "81332026"
---
# <a name="warning-c26816-the-pointer-points-to-memory-allocated-on-the-stack-es65"></a>Avertissement C26816 Le pointeur pointe vers la mémoire allouée sur la pile (ES.65)

Le pointeur pointe vers une variable qui est allouée sur la pile.  Lorsque la variable sort de portée, elle est nettoyée, ce qui rend le pointeur invalide.

## <a name="example"></a>Exemple

```cpp
// In this example, std::string is being used internally because the implementer felt it was easier to
// perform the non-trivial initialization of the value but the function returns a C-style string.
const char *danglingRawPtrFromLocal() {
  std::string s;
  
  // interesting string initialization here
  
  return s.c_str(); // Oops, The pointer points to memory allocated on the stack
}
```

Le correctif est de prolonger la durée de vie de la valeur qui est utilisée.  Dans cet exemple, nous abordons l’avertissement en retournant le std::string.
Il pourrait également être abordé en copiant les données au tas ou en ajoutant une variable " out " à la liste des paramètres de fonction.

```cpp
std::string danglingRawPtrFromLocal() {
  std::string s;
  
  // interesting string initialization here
  
  return s;
}
```

## <a name="see-also"></a>Voir aussi

[ES.65: Ne pas déreférencer un pointeur invalide](https://github.com/isocpp/CppCoreGuidelines/blob/master/CppCoreGuidelines.md#Res-deref)
