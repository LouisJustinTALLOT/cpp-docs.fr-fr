---
title: CMFCToolBarMenuButton, classe
ms.date: 11/04/2016
f1_keywords:
- CMFCToolBarMenuButton
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::CMFCToolBarMenuButton
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::CompareWith
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::CopyFrom
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::CreateFromMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::CreateMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::CreatePopupMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::EnableQuickCustomize
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::GetCommands
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::GetImageRect
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::GetPaletteRows
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::GetPopupMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::HasButton
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::HaveHotBorder
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsBorder
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsClickedOnMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsDroppedDown
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsEmptyMenuAllowed
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsExclusive
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsMenuPaletteMode
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsQuickMode
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsTearOffMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnAfterCreatePopupMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnBeforeDrag
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnCalculateSize
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnCancelMode
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnChangeParentWnd
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnClick
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnClickMenuItem
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnContextHelp
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnDraw
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnDrawOnCustomizeList
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OpenPopupMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::ResetImageToDefault
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::SaveBarState
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::Serialize
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::SetACCData
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::SetMenuOnly
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::SetMenuPaletteMode
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::SetMessageWnd
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::SetRadio
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::SetTearOff
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::DrawDocumentIcon
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::m_bAlwaysCallOwnerDraw
helpviewer_keywords:
- CMFCToolBarMenuButton [MFC], CMFCToolBarMenuButton
- CMFCToolBarMenuButton [MFC], CompareWith
- CMFCToolBarMenuButton [MFC], CopyFrom
- CMFCToolBarMenuButton [MFC], CreateFromMenu
- CMFCToolBarMenuButton [MFC], CreateMenu
- CMFCToolBarMenuButton [MFC], CreatePopupMenu
- CMFCToolBarMenuButton [MFC], EnableQuickCustomize
- CMFCToolBarMenuButton [MFC], GetCommands
- CMFCToolBarMenuButton [MFC], GetImageRect
- CMFCToolBarMenuButton [MFC], GetPaletteRows
- CMFCToolBarMenuButton [MFC], GetPopupMenu
- CMFCToolBarMenuButton [MFC], HasButton
- CMFCToolBarMenuButton [MFC], HaveHotBorder
- CMFCToolBarMenuButton [MFC], IsBorder
- CMFCToolBarMenuButton [MFC], IsClickedOnMenu
- CMFCToolBarMenuButton [MFC], IsDroppedDown
- CMFCToolBarMenuButton [MFC], IsEmptyMenuAllowed
- CMFCToolBarMenuButton [MFC], IsExclusive
- CMFCToolBarMenuButton [MFC], IsMenuPaletteMode
- CMFCToolBarMenuButton [MFC], IsQuickMode
- CMFCToolBarMenuButton [MFC], IsTearOffMenu
- CMFCToolBarMenuButton [MFC], OnAfterCreatePopupMenu
- CMFCToolBarMenuButton [MFC], OnBeforeDrag
- CMFCToolBarMenuButton [MFC], OnCalculateSize
- CMFCToolBarMenuButton [MFC], OnCancelMode
- CMFCToolBarMenuButton [MFC], OnChangeParentWnd
- CMFCToolBarMenuButton [MFC], OnClick
- CMFCToolBarMenuButton [MFC], OnClickMenuItem
- CMFCToolBarMenuButton [MFC], OnContextHelp
- CMFCToolBarMenuButton [MFC], OnDraw
- CMFCToolBarMenuButton [MFC], OnDrawOnCustomizeList
- CMFCToolBarMenuButton [MFC], OpenPopupMenu
- CMFCToolBarMenuButton [MFC], ResetImageToDefault
- CMFCToolBarMenuButton [MFC], SaveBarState
- CMFCToolBarMenuButton [MFC], Serialize
- CMFCToolBarMenuButton [MFC], SetACCData
- CMFCToolBarMenuButton [MFC], SetMenuOnly
- CMFCToolBarMenuButton [MFC], SetMenuPaletteMode
- CMFCToolBarMenuButton [MFC], SetMessageWnd
- CMFCToolBarMenuButton [MFC], SetRadio
- CMFCToolBarMenuButton [MFC], SetTearOff
- CMFCToolBarMenuButton [MFC], DrawDocumentIcon
- CMFCToolBarMenuButton [MFC], m_bAlwaysCallOwnerDraw
ms.assetid: cfa50176-7e4b-4527-9904-86a1b48fc1bc
ms.openlocfilehash: 418ef29657271010c3a12f0f15a12f45e5351aac
ms.sourcegitcommit: c123cc76bb2b6c5cde6f4c425ece420ac733bf70
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/14/2020
ms.locfileid: "81376167"
---
# <a name="cmfctoolbarmenubutton-class"></a>CMFCToolBarMenuButton, classe

Bouton de barre d'outils qui contient un menu contextuel.
Pour plus de détails, consultez le code source situé dans le dossier **VC\\\\atlmfc src\\mfc** de votre installation Visual Studio.

## <a name="syntax"></a>Syntaxe

```
class CMFCToolBarMenuButton : public CMFCToolBarButton
```

## <a name="members"></a>Membres

### <a name="public-constructors"></a>Constructeurs publics

|Nom|Description|
|----------|-----------------|
|[CMFCToolBarMenuButton::CMFCToolBarMenuButton](#cmfctoolbarmenubutton)|Construit un objet `CMFCToolBarMenuButton`.|

### <a name="public-methods"></a>M&#233;thodes publiques

|Nom|Description|
|----------|-----------------|
|[CMFCToolBarMenuButton::CompareWith](#comparewith)|Compare cette instance avec `CMFCToolBarButton` l’objet fourni. (Overrides [CMFCToolBarButton::CompareWith](../../mfc/reference/cmfctoolbarbutton-class.md#comparewith).)|
|[CMFCToolBarMenuButton::CopyDe](#copyfrom)|Copie les propriétés d’un autre bouton de barre d’outils sur le bouton actuel. (Overrides [CMFCToolBarButton::CopyDe](../../mfc/reference/cmfctoolbarbutton-class.md#copyfrom).)|
|[CMFCToolBarMenuButton::CreateDeMenu](#createfrommenu)|Initialise le menu de la barre d’outils à partir d’une poignée de menu Windows.|
|[CMFCToolBarMenuButton::CreateMenu](#createmenu)|Crée un menu Windows qui se compose des commandes dans le menu de la barre d’outils. Retourne une poignée au menu Windows.|
|[CMFCToolBarMenuButton::CreatePopupMenu](#createpopupmenu)|Crée un objet de menu pop-up ( [CLASSE CMFCPopupMenu](../../mfc/reference/cmfcpopupmenu-class.md)) pour afficher le menu de la barre d’outils.|
|[CMFCToolBarMenuButton::EnableQuickCustomize](#enablequickcustomize)||
|[CMFCToolBarMenuButton::GetCommands](#getcommands)|Donne un accès à la liste des commandes dans le menu de la barre d’outils.|
|[CMFCToolBarMenuButton::GetImageRect](#getimagerect)|Récupère le rectangle de délimitation pour l’image boutonnée.|
|[CMFCToolBarMenuButton::GetPaletteRows](#getpaletterows)|Retourne le nombre de lignes dans le menu pop-up lorsque le menu est en mode palette.|
|[CMFCToolBarMenuButton::GetPopupMenu](#getpopupmenu)|Retourne un pointeur à l’objet de menu pop-up qui est associé au bouton.|
|[CMFCToolBarMenuButton::HasButton](#hasbutton)||
|[CMFCToolBarMenuButton::HaveHotBorder](#havehotborder)|Détermine si une bordure du bouton est affichée lorsqu’un utilisateur sélectionne le bouton. (Overrides [CMFCToolBarButton::HaveHotBorder](../../mfc/reference/cmfctoolbarbutton-class.md#havehotborder).)|
|[CMFCToolBarMenuButton::IsBorder](#isborder)||
|[CMFCToolBarMenuButton::IsClickedOnMenu](#isclickedonmenu)||
|[CMFCToolBarMenuButton::IsDroppedDown](#isdroppeddown)|Détermine si le menu pop-up est affiché.|
|[CMFCToolBarMenuButton::IsEmptyMenuAllowed](#isemptymenuallowed)|Appelé par le cadre pour déterminer si un utilisateur peut ouvrir un sous-mois à partir de l’élément de menu sélectionné.|
|[CMFCToolBarMenuButton::Est-ce que c’est exclusif](#isexclusive)|Détermine si le bouton est en mode exclusif, c’est-à-dire si le menu pop-up reste ouvert même lorsque l’utilisateur déplace le pointeur sur une autre barre d’outils ou un bouton.|
|[CMFCToolBarMenuButton::IsMenuPaletteMode](#ismenupalettemode)|Détermine si le menu pop-up est en mode palette.|
|[CMFCToolBarMenuButton::IsQuickMode](#isquickmode)||
|[CMFCToolBarMenuButton::IsTearOffMenu](#istearoffmenu)|Détermine si le menu pop-up dispose d’une barre déchirante.|
|[CMFCToolBarMenuButton::OnAfterCreatePopupMenu](#onaftercreatepopupmenu)||
|[CMFCToolBarMenuButton::OnBeforeDrag](#onbeforedrag)|Précise si le bouton peut être traîné. (Overrides [CMFCToolBarButton::OnBeforeDrag](../../mfc/reference/cmfctoolbarbutton-class.md#onbeforedrag).)|
|[CMFCToolBarMenuButton::OnCalculateSize](#oncalculatesize)|Appelé par le cadre pour calculer la taille du bouton pour le contexte de l’appareil spécifié et l’état d’amarrage. (Overrides [CMFCToolBarButton::OnCalculateSize](../../mfc/reference/cmfctoolbarbutton-class.md#oncalculatesize).)|
|[CMFCToolBarMenuButton::OnCancelMode](#oncancelmode)|Appelé par le cadre pour gérer le [message WM_CANCELMODE.](/windows/win32/winmsg/wm-cancelmode) (Overrides [CMFCToolBarButton::OnCancelMode](../../mfc/reference/cmfctoolbarbutton-class.md#oncancelmode).)|
|[CMFCToolBarMenuButton::OnChangeParentWnd](#onchangeparentwnd)|Appelé par le cadre lorsque le bouton est inséré dans une nouvelle barre d’outils. (Overrides [CMFCToolBarButton::OnChangeParentWnd](cmfctoolbarbutton-class.md#onchangeparentwnd).)|
|[CMFCToolBarMenuButton::OnClick](#onclick)|Appelé par le cadre lorsque l’utilisateur clique sur le bouton de la souris. (Overrides [CMFCToolBarButton::OnClick](../../mfc/reference/cmfctoolbarbutton-class.md#onclick).)|
|[CMFCToolBarMenuButton::OnClickMenuItem](#onclickmenuitem)|Appelé par le cadre lorsque l’utilisateur sélectionne un élément dans le menu pop-up.|
|[CMFCToolBarMenuButton::OnContextHelp](#oncontexthelp)|Appelé par le cadre lorsque le barre d’outils parent gère un message WM_HELPHITTEST. (Overrides [CMFCToolBarButton::OnContextHelp](../../mfc/reference/cmfctoolbarbutton-class.md#oncontexthelp).)|
|[CMFCToolBarMenuButton::OnDraw](#ondraw)|Appelé par le cadre pour dessiner le bouton en utilisant les styles spécifiés et les options. (Overrides [CMFCToolBarButton::OnDraw](../../mfc/reference/cmfctoolbarbutton-class.md#ondraw).)|
|[CMFCToolBarMenuButton::OnDrawOnCustomizeList](#ondrawoncustomizelist)|Appelé par le cadre pour dessiner le bouton dans le volet **Commandes** de la boîte de dialogue **Customize.** (Overrides [CMFCToolBarButton::OnDrawOnCustomizeList](../../mfc/reference/cmfctoolbarbutton-class.md#ondrawoncustomizelist).)|
|[CMFCToolBarMenuButton::OpenPopupMenu](#openpopupmenu)|Appelé par le cadre lorsque l’utilisateur ouvre le menu pop-up.|
|[CMFCToolBarMenuButton::ResetImageToDefault](#resetimagetodefault)|Définit à la valeur par défaut l’image qui est associée au bouton. (Overrides [CMFCToolBarButton::ResetImageToDefault](../../mfc/reference/cmfctoolbarbutton-class.md#resetimagetodefault).)|
|[CMFCToolBarMenuButton::SaveBarState](#savebarstate)|Enregistre l’état du bouton de la barre d’outils. (Overrides [CMFCToolBarButton::SaveBarState](../../mfc/reference/cmfctoolbarbutton-class.md#savebarstate).)|
|[CMFCToolBarMenuButton::Serialize](#serialize)|Lit cet objet à partir d’une archive ou l’écrit à une archive. (Overrides [CMFCToolBarButton::Serialize](../../mfc/reference/cmfctoolbarbutton-class.md#serialize).)|
|[CMFCToolBarMenuButton::SetACCData](#setaccdata)|Remplit l’objet fourni `CAccessibilityData` avec des données d’accessibilité à partir du bouton de la barre d’outils. (Overrides [CMFCToolBarButton::SetACCData](../../mfc/reference/cmfctoolbarbutton-class.md#setaccdata).)|
|[CMFCToolBarMenuButton::SetMenuOnly](#setmenuonly)|Précise si le bouton peut être ajouté à une barre d’outils.|
|[CMFCToolBarMenuButton::SetMenuPaletteMode](#setmenupalettemode)|Précise si le menu pop-up est en mode palette.|
|[CMFCToolBarMenuButton::SetMessageWnd](#setmessagewnd)||
|[CMFCToolBarMenuButton::SetRadio](#setradio)|Force le bouton de menu de la barre d’outils pour afficher une icône indiquant qu’elle est sélectionnée.|
|[CMFCToolBarMenuButton::SetTearOff](#settearoff)|Spécifie une pièce d’identité de barre déchirante pour le menu pop-up.|

### <a name="protected-methods"></a>Méthodes protégées

|Nom|Description|
|----------|-----------------|
|[CMFCToolBarMenuButton::DrawDocumentIcon](#drawdocumenticon)|Dessine une icône sur le bouton du menu.|

### <a name="data-members"></a>Données membres

|Nom|Description|
|----------|-----------------|
|[CMFCToolBarMenuButton:m_bAlwaysCallOwnerDraw](#m_balwayscallownerdraw)|Si VRAI, le cadre appelle toujours [CFrameWndEx::OnDrawMenuImage](../../mfc/reference/cframewndex-class.md#ondrawmenuimage) lorsqu’un bouton est dessiné.|

## <a name="remarks"></a>Notes

A `CMFCToolBarMenuButton` peut apparaître comme un menu, un élément de menu qui dispose d’un sous-menu, un bouton qui exécute une commande ou affiche un menu, ou un bouton qui affiche seulement un menu. Vous déterminez le comportement et l’apparence du bouton du menu en spécifiant des paramètres tels que `CMFCToolbarMenuButton::CMFCToolbarMenuButton`l’image, le texte, la poignée de menu et l’ID de commande qui est associé au bouton dans le constructeur .

Une classe personnalisée `CMFCToolbarMenuButton` dérivée de la classe doit utiliser la [DECLARE_SERIAL](run-time-object-model-services.md#declare_serial) macro. La [macro DECLARE_DYNCREATE](run-time-object-model-services.md#declare_dyncreate) génère une erreur lorsque l’application se ferme.

## <a name="example"></a>Exemple

L’exemple suivant montre comment `CMFCToolBarMenuButton` configurer un objet. Le code illustre comment spécifier que le menu de dépôt est en mode palette, et spécifiez l’ID pour la barre de déchirure qui est créé lorsque l’utilisateur fait glisser le bouton du menu hors d’une barre de menu. Cet extrait de code fait partie de l’ [exemple Word Pad](../../overview/visual-cpp-samples.md).

[!code-cpp[NVC_MFC_WordPad#10](../../mfc/reference/codesnippet/cpp/cmfctoolbarmenubutton-class_1.cpp)]

## <a name="inheritance-hierarchy"></a>Hiérarchie d'héritage

[CObject](cobject-class.md)

[CMFCToolBarButton](../../mfc/reference/cmfctoolbarbutton-class.md)

[CMFCToolBarMenuButton](../../mfc/reference/cmfctoolbarmenubutton-class.md)

## <a name="requirements"></a>Spécifications

**En-tête :** afxtoolbarmenubutton.h

## <a name="cmfctoolbarmenubuttoncmfctoolbarmenubutton"></a><a name="cmfctoolbarmenubutton"></a>CMFCToolBarMenuButton::CMFCToolBarMenuButton

Construit un objet `CMFCToolBarMenuButton`.

```
CMFCToolBarMenuButton();
CMFCToolBarMenuButton(const CMFCToolBarMenuButton& src);

CMFCToolBarMenuButton(
    UINT uiID,
    HMENU hMenu,
    int iImage,
    LPCTSTR lpszText=NULL,
    BOOL bUserButton=FALSE);
```

### <a name="parameters"></a>Paramètres

*src*<br/>
[dans] Un `CMFCToolBarMenuButton` objet existant à copier `CMFCToolBarMenuButton` dans cet objet.

*uiID*<br/>
[dans] L’ID de la commande pour exécuter quand un utilisateur clique sur le bouton ; ou (UINT)-1 pour un bouton de menu qui n’exécute pas directement une commande.

*hMenu*<br/>
[dans] Une poignée à un menu; ou NULL si le bouton n’a pas de menu.

*iImage (en)*<br/>
[dans] Index de l’image pour le bouton; ou -1 si ce bouton n’a pas d’icône ou utilise l’icône pour la commande spécifiée par *uiID*. L’index est le `CMFCToolBarImages` même pour chaque objet de votre application.

*lpszText*<br/>
[dans] Le texte du bouton de menu de la barre d’outils.

*bUserButton*<br/>
[dans] VRAI si le bouton affiche une image définie par l’utilisateur; FALSE si le bouton affiche une image prédéfinie associée à la commande spécifiée par *uiID*.

### <a name="remarks"></a>Notes

Si *l’uiID* est un identifiant de commande valide, le bouton effectue cette commande lorsque l’utilisateur le clique. Si *hMenu* est une poignée de menu valide, le bouton fournit un menu de décrochage lorsqu’il apparaît dans une barre d’outils ou un sous-mois lorsqu’il apparaît dans un menu. Si *uiID* et *hMenu* sont valides, le bouton est un bouton fractionné avec une partie qui effectuera la commande lorsque l’utilisateur clique dessus et une partie avec une flèche vers le bas qui déposera un menu lorsque l’utilisateur clique dessus. Toutefois, si *hMenu* est valide, un utilisateur ne sera pas en mesure de cliquer sur le bouton pour effectuer une commande lorsque le bouton est inséré dans un menu.

### <a name="example"></a>Exemple

L’exemple suivant montre comment construire `CMFCToolBarMenuButton` un objet de la classe. Cet extrait de code fait partie de l’ [exemple Word Pad](../../overview/visual-cpp-samples.md).

[!code-cpp[NVC_MFC_WordPad#9](../../mfc/reference/codesnippet/cpp/cmfctoolbarmenubutton-class_2.cpp)]

## <a name="cmfctoolbarmenubuttoncomparewith"></a><a name="comparewith"></a>CMFCToolBarMenuButton::CompareWith

```
virtual BOOL CompareWith(const CMFCToolBarButton& other) const;
```

### <a name="parameters"></a>Paramètres

[dans] *d’autres*<br/>

### <a name="return-value"></a>Valeur de retour

### <a name="remarks"></a>Notes

## <a name="cmfctoolbarmenubuttoncopyfrom"></a><a name="copyfrom"></a>CMFCToolBarMenuButton::CopyDe

```
virtual void CopyFrom(const CMFCToolBarButton& src);
```

### <a name="parameters"></a>Paramètres

[dans] *src*<br/>

### <a name="remarks"></a>Notes

## <a name="cmfctoolbarmenubuttoncreatefrommenu"></a><a name="createfrommenu"></a>CMFCToolBarMenuButton::CreateDeMenu

Initialise le menu de la barre d’outils à partir d’une poignée de menu Windows.

```
virtual void CreateFromMenu(HMENU hMenu);
```

### <a name="parameters"></a>Paramètres

*hMenu*<br/>
[dans] Une poignée à un menu.

### <a name="remarks"></a>Notes

Un bouton de menu de barre d’outils peut afficher un sous-mois de décrochage.

Le cadre appelle cette méthode pour initialiser les commandes dans le sous-mois à partir d’un menu.

## <a name="cmfctoolbarmenubuttoncreatemenu"></a><a name="createmenu"></a>CMFCToolBarMenuButton::CreateMenu

Crée un menu qui se compose des commandes dans le menu de la barre d’outils. Retourne une poignée au menu.

```
virtual HMENU CreateMenu() const;
```

### <a name="return-value"></a>Valeur de retour

Une poignée au menu en cas de succès. NULL si la liste des commandes associées au bouton de menu de la barre d’outils est vide.

### <a name="remarks"></a>Notes

Vous pouvez remplacer cette méthode dans une classe dérivée pour personnaliser la façon dont le menu est généré.

## <a name="cmfctoolbarmenubuttoncreatepopupmenu"></a><a name="createpopupmenu"></a>CMFCToolBarMenuButton::CreatePopupMenu

Crée `CMFCPopupMenu` un objet pour afficher le menu de la barre d’outils.

```
virtual CMFCPopupMenu* CreatePopupMenu();
```

### <a name="return-value"></a>Valeur de retour

Un pointeur `CMFCPopupMenu` vers un objet qui affiche le menu de dépôt associé au bouton de menu de la barre d’outils.

### <a name="remarks"></a>Notes

Cette méthode est appelée par le cadre pour préparer l’affichage du menu déroulant associé au bouton.

La implémentation par défaut `CMFCPopupMenu` ne fait que construire et retourner un nouvel objet. Remplacez cette méthode si vous souhaitez utiliser un type dérivé de [la classe CMFCPopupMenu](cmfcpopupmenu-class.md) ou pour effectuer une initialisation supplémentaire.

## <a name="cmfctoolbarmenubuttondrawdocumenticon"></a><a name="drawdocumenticon"></a>CMFCToolBarMenuButton::DrawDocumentIcon

Dessine une icône de document sur le bouton du menu.

```
void DrawDocumentIcon(
    CDC* pDC,
    const CRect& rectImage,
    HICON hIcon);
```

### <a name="parameters"></a>Paramètres

*pDC*<br/>
[dans] Un pointeur sur le contexte de l’appareil.

*rectImage*<br/>
[dans] Coordonnées du rectangle de délimitation de l’image.

*hIcon (en)*<br/>
[dans] Une poignée à l’icône.

### <a name="remarks"></a>Notes

Cette méthode prend une icône de document et l’attire sur le bouton de menu, centré dans la zone spécifiée par *rectImage*.

## <a name="cmfctoolbarmenubuttonenablequickcustomize"></a><a name="enablequickcustomize"></a>CMFCToolBarMenuButton::EnableQuickCustomize

```
void EnableQuickCustomize();
```

### <a name="remarks"></a>Notes

## <a name="cmfctoolbarmenubuttonhasbutton"></a><a name="hasbutton"></a>CMFCToolBarMenuButton::HasButton

```
virtual BOOL HasButton() const;
```

### <a name="return-value"></a>Valeur de retour

### <a name="remarks"></a>Notes

## <a name="cmfctoolbarmenubuttonhavehotborder"></a><a name="havehotborder"></a>CMFCToolBarMenuButton::HaveHotBorder

```
virtual BOOL HaveHotBorder() const;
```

### <a name="return-value"></a>Valeur de retour

### <a name="remarks"></a>Notes

## <a name="cmfctoolbarmenubuttonisborder"></a><a name="isborder"></a>CMFCToolBarMenuButton::IsBorder

```
virtual BOOL IsBorder() const;
```

### <a name="return-value"></a>Valeur de retour

### <a name="remarks"></a>Notes

## <a name="cmfctoolbarmenubuttonisclickedonmenu"></a><a name="isclickedonmenu"></a>CMFCToolBarMenuButton::IsClickedOnMenu

```
BOOL IsClickedOnMenu() const;
```

### <a name="return-value"></a>Valeur de retour

### <a name="remarks"></a>Notes

## <a name="cmfctoolbarmenubuttonisquickmode"></a><a name="isquickmode"></a>CMFCToolBarMenuButton::IsQuickMode

```
BOOL IsQuickMode();
```

### <a name="return-value"></a>Valeur de retour

### <a name="remarks"></a>Notes

## <a name="cmfctoolbarmenubuttongetcommands"></a><a name="getcommands"></a>CMFCToolBarMenuButton::GetCommands

Donne un accès à la liste des commandes dans le menu de la barre d’outils.

```
const CObList& GetCommands() const;
```

### <a name="return-value"></a>Valeur de retour

Une référence const à un objet [de classe CObList,](../../mfc/reference/coblist-class.md) qui contient une collection d’objets de [classe CMFCToolBarButton.](../../mfc/reference/cmfctoolbarbutton-class.md)

### <a name="remarks"></a>Notes

Un bouton de menu de barre d’outils peut afficher un sous-mois. Vous pouvez fournir la liste des commandes dans le sous-mois dans le constructeur ou dans [CMFCToolBarMenuButton::CreateFromMenu](#createfrommenu) comme une poignée à un menu (HMENU). Le menu est converti en une liste d’objets dérivés de la classe `CObList` [CMFCToolBarButton](../../mfc/reference/cmfctoolbarbutton-class.md) et stockés dans l’objet interne. Vous pouvez accéder à cette liste en appelant cette méthode.

## <a name="cmfctoolbarmenubuttongetimagerect"></a><a name="getimagerect"></a>CMFCToolBarMenuButton::GetImageRect

Récupère le rectangle de délimitation pour l’image boutonnée.

```
void GetImageRect(CRect& rectImage);
```

### <a name="parameters"></a>Paramètres

*rectImage*<br/>
[out] Une référence `CRect` à un objet qui reçoit les coordonnées du rectangle de délimitation de l’image.

## <a name="cmfctoolbarmenubuttongetpaletterows"></a><a name="getpaletterows"></a>CMFCToolBarMenuButton::GetPaletteRows

Retourne le nombre de lignes dans le menu déroulant lorsque le menu est en mode palette.

```
int GetPaletteRows() const;
```

### <a name="return-value"></a>Valeur de retour

Le nombre de lignes dans la palette.

### <a name="remarks"></a>Notes

Lorsque le bouton du menu est réglé en mode palette, les éléments du menu apparaissent dans plusieurs colonnes avec seulement un nombre limité de lignes. Appelez cette méthode pour obtenir le nombre de lignes. Vous pouvez activer ou désactiver le mode palette et spécifier le nombre de lignes à l’aide de [CMFCToolBarMenuButton::SetMenuPaletteMode](#setmenupalettemode).

## <a name="cmfctoolbarmenubuttongetpopupmenu"></a><a name="getpopupmenu"></a>CMFCToolBarMenuButton::GetPopupMenu

Retourne un pointeur à l’objet [CMFCPopupMenu Class](../../mfc/reference/cmfcpopupmenu-class.md) qui représente le menu déroulant du bouton.

```
CMFCPopupMenu* GetPopupMenu() const;
```

### <a name="return-value"></a>Valeur de retour

Un pointeur vers un objet [cmFCPopupMenu Classe](../../mfc/reference/cmfcpopupmenu-class.md) qui a été créé lorsque le cadre a attiré le sous-mois du bouton de menu de barre d’outils; NULL si aucun sous-mois n’est affiché.

### <a name="remarks"></a>Notes

Lorsqu’un bouton de menu de barre d’outils affiche un menu de dépôt, le bouton crée un objet [cmFCPopupMenu Class](../../mfc/reference/cmfcpopupmenu-class.md) pour représenter le menu. Appelez cette méthode pour obtenir `CMFCPopupMenu` un pointeur sur l’objet. Vous ne devez pas stocker le pointeur retourné, car il est temporaire et devient invalide lorsque l’utilisateur ferme le menu de dépôt.

## <a name="cmfctoolbarmenubuttonisdroppeddown"></a><a name="isdroppeddown"></a>CMFCToolBarMenuButton::IsDroppedDown

Indique si le menu pop-up est actuellement affiché.

```
virtual BOOL IsDroppedDown() const;
```

### <a name="return-value"></a>Valeur de retour

VRAI si le bouton de menu de barre d’outils affiche son sous-mois ; autrement FALSE.

## <a name="cmfctoolbarmenubuttonisemptymenuallowed"></a><a name="isemptymenuallowed"></a>CMFCToolBarMenuButton::IsEmptyMenuAllowed

Précise si les éléments du menu affiche un sous-genre vide.

```
virtual BOOL IsEmptyMenuAllowed() const;
```

### <a name="return-value"></a>Valeur de retour

VRAI si le cadre ouvre un sous-mois à partir de l’élément de menu actuellement sélectionné, même lorsque le sous-mois est vide; autrement FALSE.

### <a name="remarks"></a>Notes

Le cadre appelle cette méthode lorsqu’un utilisateur tente d’ouvrir le sous-mois à partir de l’élément de menu actuellement sélectionné. Si le sous-marin `IsEmptyMenuAllowed` est vide et retourne FALSE, le sous-menu ne s’ouvrira pas.

La implémentation par défaut renvoie FALSE. Remplacer cette méthode pour personnaliser ce comportement.

## <a name="cmfctoolbarmenubuttonisexclusive"></a><a name="isexclusive"></a>CMFCToolBarMenuButton::Est-ce que c’est exclusif

Indique si le bouton est en mode exclusif.

```
virtual BOOL IsExclusive() const;
```

### <a name="return-value"></a>Valeur de retour

VRAI si le bouton fonctionne en mode exclusif; autrement FALSE.

### <a name="remarks"></a>Notes

Lorsqu’un utilisateur ouvre un menu popup pour un bouton, puis déplace le pointeur de souris sur une autre barre d’outils ou un bouton de menu, le menu popup se ferme à moins que le bouton soit en mode exclusif.

L’implémentation par défaut renvoie toujours FALSE. Remplacer cette méthode dans une classe dérivée si vous souhaitez activer le mode exclusif.

## <a name="cmfctoolbarmenubuttonismenupalettemode"></a><a name="ismenupalettemode"></a>CMFCToolBarMenuButton::IsMenuPaletteMode

Détermine si le menu de décrochage est en mode palette.

```
BOOL IsMenuPaletteMode() const;
```

### <a name="return-value"></a>Valeur de retour

VRAI si le mode palette est activé, sinon FALSE.

### <a name="remarks"></a>Notes

Lorsque le bouton du menu est réglé en mode palette, les éléments du menu apparaissent dans plusieurs colonnes avec seulement un nombre limité de lignes. Appelez cette méthode pour obtenir le nombre de lignes. Vous pouvez activer ou désactiver le mode palette en appelant [CMFCToolBarMenuButton::SetMenuPaletteMode](#setmenupalettemode).

## <a name="cmfctoolbarmenubuttonistearoffmenu"></a><a name="istearoffmenu"></a>CMFCToolBarMenuButton::IsTearOffMenu

Indique si le menu de dépôt a une barre de déchirure.

```
virtual BOOL IsTearOffMenu() const;
```

### <a name="return-value"></a>Valeur de retour

VRAI si le bouton de menu de la barre d’outils a une barre déchirante; autrement FALSE.

### <a name="remarks"></a>Notes

Pour activer la fonction de déchirure et définir l’ID de la barre de déchirure, appelez [CMFCToolBarMenuButton::SetTearOff](#settearoff).

## <a name="cmfctoolbarmenubuttonm_balwayscallownerdraw"></a><a name="m_balwayscallownerdraw"></a>CMFCToolBarMenuButton:m_bAlwaysCallOwnerDraw

Précise si le cadre appelle toujours [CFrameWndEx::OnDrawMenuImage](../../mfc/reference/cframewndex-class.md#ondrawmenuimage) quand un bouton est tiré.

```
static BOOL m_bAlwaysCallOwnerDraw;
```

### <a name="remarks"></a>Notes

Lorsque cette variable de membre est définie sur TRUE, le bouton appelle toujours [CFrameWndEx::OnDrawMenuImage](../../mfc/reference/cframewndex-class.md#ondrawmenuimage) méthode pour afficher l’image sur le bouton. Quand `m_bAlwaysCallOwnerDraw` est FALSE, le bouton lui-même dessine l’image si l’image est prédéfinie. Sinon, il `OnDrawMenuImage`appelle .

## <a name="cmfctoolbarmenubuttononaftercreatepopupmenu"></a><a name="onaftercreatepopupmenu"></a>CMFCToolBarMenuButton::OnAfterCreatePopupMenu

```
virtual void OnAfterCreatePopupMenu();
```

### <a name="remarks"></a>Notes

## <a name="cmfctoolbarmenubuttononbeforedrag"></a><a name="onbeforedrag"></a>CMFCToolBarMenuButton::OnBeforeDrag

```
virtual BOOL OnBeforeDrag() const;
```

### <a name="return-value"></a>Valeur de retour

### <a name="remarks"></a>Notes

## <a name="cmfctoolbarmenubuttononcalculatesize"></a><a name="oncalculatesize"></a>CMFCToolBarMenuButton::OnCalculateSize

```
virtual SIZE OnCalculateSize(
    CDC* pDC,
    const CSize& sizeDefault,
    BOOL bHorz);
```

### <a name="parameters"></a>Paramètres

[dans] *pDC (pDC)*<br/>
[dans] *tailleDefault*<br/>
[dans] *bHorz (en)*<br/>

### <a name="return-value"></a>Valeur de retour

### <a name="remarks"></a>Notes

## <a name="cmfctoolbarmenubuttononcancelmode"></a><a name="oncancelmode"></a>CMFCToolBarMenuButton::OnCancelMode

```
virtual void OnCancelMode();
```

### <a name="remarks"></a>Notes

## <a name="cmfctoolbarmenubuttononchangeparentwnd"></a><a name="onchangeparentwnd"></a>CMFCToolBarMenuButton::OnChangeParentWnd

```
virtual void OnChangeParentWnd(CWnd* pWndParent);
```

### <a name="parameters"></a>Paramètres

[dans] *pWndParent*<br/>

### <a name="remarks"></a>Notes

## <a name="cmfctoolbarmenubuttononclick"></a><a name="onclick"></a>CMFCToolBarMenuButton::OnClick

```
virtual BOOL OnClick(
    CWnd* pWnd,
    BOOL bDelay = TRUE);
```

### <a name="parameters"></a>Paramètres

[dans] *pWnd (pWnd)*<br/>
[dans] *bDelay (en)*<br/>

### <a name="return-value"></a>Valeur de retour

### <a name="remarks"></a>Notes

## <a name="cmfctoolbarmenubuttononclickmenuitem"></a><a name="onclickmenuitem"></a>CMFCToolBarMenuButton::OnClickMenuItem

Appelé par le cadre lorsque l’utilisateur sélectionne un élément dans le menu de dépôt.

```
virtual BOOL OnClickMenuItem();
```

### <a name="return-value"></a>Valeur de retour

FALSE si le cadre doit continuer le traitement par défaut de l’élément de menu; autrement VRAI. L’implémentation par défaut renvoie toujours FALSE.

### <a name="remarks"></a>Notes

Lorsque l’utilisateur clique sur un élément de menu, le cadre exécute une commande associée à cet élément.

Pour personnaliser le traitement des `OnClickMenuItem` éléments de menu, remplacez dans une classe dérivée de la `CMFCToolBarMenuButton` classe. Vous devez également remplacer [CFrameWndEx::OnShowPopupMenu](../../mfc/reference/cframewndex-class.md#onshowpopupmenu) et remplacer les boutons de menu qui nécessitent un traitement spécial par des instances de la classe dérivée.

## <a name="cmfctoolbarmenubuttononcontexthelp"></a><a name="oncontexthelp"></a>CMFCToolBarMenuButton::OnContextHelp

```
virtual BOOL OnContextHelp(CWnd* pWnd);
```

### <a name="parameters"></a>Paramètres

[dans] *pWnd (pWnd)*<br/>

### <a name="return-value"></a>Valeur de retour

### <a name="remarks"></a>Notes

## <a name="cmfctoolbarmenubuttonondraw"></a><a name="ondraw"></a>CMFCToolBarMenuButton::OnDraw

```
virtual void OnDraw(
    CDC* pDC,
    const CRect& rect,
    CMFCToolBarImages* pImages,
    BOOL bHorz = TRUE,
    BOOL bCustomizeMode = FALSE,
    BOOL bHighlight = FALSE,
    BOOL bDrawBorder = TRUE,
    BOOL bGrayDisabledButtons = TRUE);
```

### <a name="parameters"></a>Paramètres

[dans] *pDC (pDC)*<br/>
[dans] *rect*<br/>
[dans] *pImages (en)*<br/>
[dans] *bHorz (en)*<br/>
[dans] *bCustomizeMode*<br/>
[dans] *bHighlight (en)*<br/>
[dans] *bDrawBorder (en anglais seulement)*<br/>
[dans] *bGrayDisabledButtons*<br/>

### <a name="remarks"></a>Notes

## <a name="cmfctoolbarmenubuttonondrawoncustomizelist"></a><a name="ondrawoncustomizelist"></a>CMFCToolBarMenuButton::OnDrawOnCustomizeList

```
virtual int OnDrawOnCustomizeList(
    CDC* pDC,
    const CRect& rect,
    BOOL bSelected);
```

### <a name="parameters"></a>Paramètres

[dans] *pDC (pDC)*<br/>
[dans] *rect*<br/>
[dans] *bSélectré*<br/>

### <a name="return-value"></a>Valeur de retour

### <a name="remarks"></a>Notes

## <a name="cmfctoolbarmenubuttonopenpopupmenu"></a><a name="openpopupmenu"></a>CMFCToolBarMenuButton::OpenPopupMenu

Appelé par le cadre lorsque l’utilisateur ouvre le menu de dépôt d’un bouton de menu de barre d’outils.

```
virtual BOOL OpenPopupMenu(CWnd* pWnd=NULL);
```

### <a name="parameters"></a>Paramètres

*Pwnd*<br/>
[dans] Spécifie la fenêtre qui reçoit les commandes de menu déroulant. Il ne peut être NULL que si le bouton de menu de barre d’outils a une fenêtre parente.

### <a name="return-value"></a>Valeur de retour

VRAI quand un objet [cmFCPopupMenu Classe](../../mfc/reference/cmfcpopupmenu-class.md) a été créé et ouvert avec succès; autrement FALSE.

### <a name="remarks"></a>Notes

Cette fonction est appelée par le cadre lorsque l’utilisateur ouvre un menu de dépôt à partir d’un bouton de menu de barre d’outils.

## <a name="cmfctoolbarmenubuttonresetimagetodefault"></a><a name="resetimagetodefault"></a>CMFCToolBarMenuButton::ResetImageToDefault

```
virtual void ResetImageToDefault();
```

### <a name="remarks"></a>Notes

## <a name="cmfctoolbarmenubuttonsavebarstate"></a><a name="savebarstate"></a>CMFCToolBarMenuButton::SaveBarState

```
virtual void SaveBarState();
```

### <a name="remarks"></a>Notes

Le cadre appelle cette méthode lorsqu’elle crée un bouton de barre d’outils à la suite d’une opération de drag-and-drop. Cette méthode appelle la [méthode CMFCPopupMenu::SaveState](../../mfc/reference/cmfcpopupmenu-class.md#savestate) méthode du menu pop-up de haut niveau, qui provoque le bouton parent du menu pop-up pour recréer son menu.

## <a name="cmfctoolbarmenubuttonserialize"></a><a name="serialize"></a>CMFCToolBarMenuButton::Serialize

```
virtual void Serialize(CArchive& ar);
```

### <a name="parameters"></a>Paramètres

[dans] *ar*<br/>

### <a name="remarks"></a>Notes

## <a name="cmfctoolbarmenubuttonsetaccdata"></a><a name="setaccdata"></a>CMFCToolBarMenuButton::SetACCData

Définit les données d’accessibilité de l’élément ruban.

```
virtual BOOL SetACCData(
    CWnd* pParent,
    CAccessibilityData& data);
```

### <a name="parameters"></a>Paramètres

*pParent*<br/>
La fenêtre parente de l’élément ruban.

*data*<br/>
Les données d’accessibilité de l’élément ruban.

### <a name="return-value"></a>Valeur de retour

Retourne toujours VRAI.

### <a name="remarks"></a>Notes

Par défaut, cette méthode définit les données d’accessibilité pour l’élément ruban et renvoie toujours VRAI. Remplacez cette méthode pour définir l’accessibilité des données et retourner une valeur qui indique la réussite ou l’échec.

## <a name="cmfctoolbarmenubuttonsetmenuonly"></a><a name="setmenuonly"></a>CMFCToolBarMenuButton::SetMenuOnly

Précise si le bouton est dessiné comme un bouton de menu ou un bouton split quand il a à la fois un ID de commande valide et un sous-mois.

```
void SetMenuOnly(BOOL bMenuOnly);
```

### <a name="parameters"></a>Paramètres

*bMenuOnly*<br/>
[dans] VRAI pour afficher ce bouton comme un bouton de menu quand il a à la fois un ID de commande valide et un sous-mois, FALSE pour afficher ce bouton comme un bouton fractionné quand il a à la fois un ID de commande valide et un sous-mois.

### <a name="remarks"></a>Notes

Typiquement, quand un bouton de menu de barre d’outils a à la fois un sous-mois et un ID de commande, le menu semble être un bouton fendu qui a un bouton principal et un bouton de flèche vers le bas attaché. Si vous appelez cette méthode et *bMenuOnly* est VRAI, le bouton semble plutôt être un bouton de menu unique avec une flèche vers le bas dans le bouton. Lorsque l’utilisateur clique sur la flèche dans l’un ou l’autre mode, le sous-marin s’ouvre, et lorsque l’utilisateur clique sur la partie non-flèche du bouton dans l’un ou l’autre mode, le cadre exécute la commande .

## <a name="cmfctoolbarmenubuttonsetmenupalettemode"></a><a name="setmenupalettemode"></a>CMFCToolBarMenuButton::SetMenuPaletteMode

Précise si le menu de décrochage est en mode palette.

```
void SetMenuPaletteMode(
    BOOL bMenuPaletteMode=TRUE,
    int nPaletteRows=1);
```

### <a name="parameters"></a>Paramètres

*bMenuPaletteMode*<br/>
[dans] Précise si le menu de décrochage est en mode palette.

*nPaletteRows (en)*<br/>
[dans] Nombre de lignes dans la palette.

### <a name="remarks"></a>Notes

En mode palette, tous les éléments du menu sont affichés sous forme de palette multicolumn. Vous spécifiez le nombre de lignes en utilisant *nPaletteRows*.

## <a name="cmfctoolbarmenubuttonsetmessagewnd"></a><a name="setmessagewnd"></a>CMFCToolBarMenuButton::SetMessageWnd

```
void SetMessageWnd(CWnd* pWndMessage);
```

### <a name="parameters"></a>Paramètres

[dans] *pWndMessage*<br/>

### <a name="remarks"></a>Notes

## <a name="cmfctoolbarmenubuttonsetradio"></a><a name="setradio"></a>CMFCToolBarMenuButton::SetRadio

Définit le bouton de menu de la barre d’outils pour afficher une icône de style bouton radio lorsqu’elle est vérifiée.

```
virtual void SetRadio();
```

### <a name="remarks"></a>Notes

Lorsque le bouton du menu est dessiné pendant qu’il est vérifié, il appelle [CMFCVisualManager::OnDrawMenuCheck](../../mfc/reference/cmfcvisualmanager-class.md#ondrawmenucheck) pour dessiner une icône de checkmark. Par défaut, `OnDrawMenuCheck` demande que le gestionnaire visuel actuel dessine une coche de style case à cocher sur le bouton du menu. Après avoir appelé cette méthode, le gestionnaire visuel actuel dessine plutôt une marque de contrôle de style bouton radio sur le bouton de menu. Ce changement ne peut être annulé.

Lorsque vous appelez cette méthode et que le bouton de menu est actuellement affiché, il se rafraîchit.

## <a name="cmfctoolbarmenubuttonsettearoff"></a><a name="settearoff"></a>CMFCToolBarMenuButton::SetTearOff

Spécifie l’ID de la barre de démolition pour le menu de dépôt.

```
virtual void SetTearOff(UINT uiBarID);
```

### <a name="parameters"></a>Paramètres

*uiBarID*<br/>
[dans] Spécifie une nouvelle pièce d’identité de barre déchirante.

### <a name="remarks"></a>Notes

Appelez cette méthode pour spécifier l’ID pour la barre de déchirure qui est créée lorsque l’utilisateur fait glisser le bouton du menu hors d’une barre de menu. Si le paramètre *uiBarID* est de 0, l’utilisateur ne peut pas arracher le bouton du menu.

Appelez [CWinAppEx::EnableTearOffMenus](../../mfc/reference/cwinappex-class.md#enabletearoffmenus) pour activer la fonction de menu déchirante de votre application.

## <a name="see-also"></a>Voir aussi

[Graphique hiérarchique](../../mfc/hierarchy-chart.md)<br/>
[Classes](../../mfc/reference/mfc-classes.md)<br/>
[CMFCToolBarButton, classe](../../mfc/reference/cmfctoolbarbutton-class.md)<br/>
[Classe CMFCToolBar](../../mfc/reference/cmfctoolbar-class.md)<br/>
[CMFCPopupMenu, classe](../../mfc/reference/cmfcpopupmenu-class.md)
